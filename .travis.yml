language: python

python:
  - "3.6"

os:
  - linux

dist: xenial

#===============================================================================
#
#     Modal Tool Kit (MTK)
#
#     Copyright 2017 Christopher A. Lupp
#
#     Licensed under the Apache License, Version 2.0 (the "License");
#     you may not use this file except in compliance with the License.
#     You may obtain a copy of the License at
#
#         http://www.apache.org/licenses/LICENSE-2.0
#
#     Unless required by applicable law or agreed to in writing, software
#     distributed under the License is distributed on an "AS IS" BASIS,
#     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#     See the License for the specific language governing permissions and
#     limitations under the License.
#
#===============================================================================

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - cmake
    - gcc-9
    - g++-9


before_script:
  - git clone https://github.com/eigenteam/eigen-git-mirror.git
  - cd eigen-git-mirror
  - git checkout 3.3.4
  - cd ..
  - export EIGEN3_ROOT=$PWD/eigen-git-mirror
  - export CC=gcc-8
  - export CXX=g++-8
  - mkdir build
  - cd build
  - mkdir install
  - cmake .. -DBUILD_TEST=TRUE -DCMAKE_INSTALL_PREFIX="install"
  - pip install numpy
  - pip install cython
  - pip install eigency

script:
  - make install
  - cd install/MTK
  - pip install .
  - cd ../..
  - make test